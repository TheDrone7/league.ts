{"_path":"/guide/caching","_dir":"guide","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Client Caching","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"client-caching"},"children":[{"type":"text","value":"Client Caching"}]},{"type":"element","tag":"h3","props":{"id":"what-it-is"},"children":[{"type":"text","value":"What it is"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The shieldbow client has a built-in caching system."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Caching systems are intended to store data in the memory to avoid fetching the same data multiple times."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The shieldbow cache serves three primary purposes."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To cache the processed JS objects of the data dragon files."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To cache the data fetched from the APIs."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To keep track of the rate limits."}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"IMPORTANT"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe cache is not intended to be used as a storage system."}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"NOTE"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nShieldbow sends processed JS objects to the cache, not the raw JSON data.\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe only exception to this is the ratelimits, which instead sends an array of numbers."}]}]},{"type":"element","tag":"h3","props":{"id":"how-does-it-work"},"children":[{"type":"text","value":"How does it work"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, shieldbow provides a built-in cache that stores the data in memory.\nSome helpful links to learn more about this cache system:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"API docs: "},{"type":"element","tag":"a","props":{"href":"/api/memorycache"},"children":[{"type":"text","value":"MemoryCache"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Source code: "},{"type":"element","tag":"a","props":{"href":"https://github.com/TheDrone7/shieldbow/blob/update/v2/src/util/MemoryCache.ts","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Whenever you make a request to one of the APIs, the client will"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Check if caching is enabled."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Check if the data is already cached."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If it is, it will return the cached data."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If not, it will proceed to "},{"type":"element","tag":"a","props":{"href":"/guide/storage"},"children":[{"type":"text","value":"storage"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since storage is not a concern of this document, you can think of it as a way to fetch the data from the APIs."}]},{"type":"element","tag":"h3","props":{"id":"the-defaults"},"children":[{"type":"text","value":"The defaults"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, the client will cache all data it fetches, from both the data dragon, and the RIOT APIs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This can be changed by setting the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cache"}]},{"type":"text","value":" option to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" when initializing the client.\nYou can set it to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" to enable caching, or to an object to customize the cache.\nThe object can be fine-tuned to a per-API basis."}]},{"type":"element","tag":"code","props":{"code":"client.initialize({\n  cache: {\n    enable: {\n      api: { // API caching\n        summoner: true, // Enable or disable caching for the summoner API\n        match: true, // Enable or disable caching for the match API\n        // ... so on\n      },\n      dragon: {\n        champions: true, // Enable or disable caching for the champions data dragon\n        items: true, // Enable or disable caching for the items data dragon\n        // ... so on\n      }\n    } // Enable or disable caching\n  }\n})\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"client."}]},{"type":"element","tag":"span","props":{"class":"ct-32732a"},"children":[{"type":"text","value":"initialize"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"  cache: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"    enable: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"      api: { "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// API caching"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"        summoner: "}]},{"type":"element","tag":"span","props":{"class":"ct-644dd0"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// Enable or disable caching for the summoner API"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"        match: "}]},{"type":"element","tag":"span","props":{"class":"ct-644dd0"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// Enable or disable caching for the match API"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// ... so on"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"      dragon: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"        champions: "}]},{"type":"element","tag":"span","props":{"class":"ct-644dd0"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// Enable or disable caching for the champions data dragon"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"        items: "}]},{"type":"element","tag":"span","props":{"class":"ct-644dd0"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// Enable or disable caching for the items data dragon"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// ... so on"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// Enable or disable caching"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For quicker access, you can simply set "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dragon"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" to\nenable or disable caching for all APIs or data dragon data respectively."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This can be used at any level in the object."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"custom-cache"},"children":[{"type":"text","value":"Custom cache"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see, the default cache is a simple in-memory cache.\nThis is not ideal for production environments, as the data will be lost when the process is restarted."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To solve this, you can provide your own cache system by implementing the "},{"type":"element","tag":"a","props":{"href":"/api/icache"},"children":[{"type":"text","value":"ICache"}]},{"type":"text","value":" interface."}]},{"type":"element","tag":"code","props":{"code":"import { ICache } from 'shieldbow'\n\nclass MyCache implements ICache {\n  // ...\n}\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8928f"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":" { ICache } "}]},{"type":"element","tag":"span","props":{"class":"ct-c8928f"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9ffabc"},"children":[{"type":"text","value":"'shieldbow'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8928f"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92dcd9"},"children":[{"type":"text","value":"MyCache"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c8928f"},"children":[{"type":"text","value":"implements"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-644dd0"},"children":[{"type":"text","value":"ICache"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-70aee5"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"the-keys"},"children":[{"type":"text","value":"The keys"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see, the cache interface has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"get"}]},{"type":"text","value":" and a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" method that take a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" and a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" as parameters."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" is a string that is used to identify the data in the cache.\nThe "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" is the data that is stored in the cache."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" is generated by the client, and is unique for each API and data dragon data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The keys are generated using the following format:"}]},{"type":"element","tag":"code","props":{"code":"  `${managerName}:${id}`\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9ffabc"},"children":[{"type":"text","value":"`${"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"managerName"}]},{"type":"element","tag":"span","props":{"class":"ct-9ffabc"},"children":[{"type":"text","value":"}:${"}]},{"type":"element","tag":"span","props":{"class":"ct-e5430a"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-9ffabc"},"children":[{"type":"text","value":"}`"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"managerName"}]},{"type":"text","value":" is the name of the manager that is fetching the data, and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" is the id of the data.\nSome common examples for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"managerName"}]},{"type":"text","value":" are "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"summoner"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"match"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"champion"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"item"}]},{"type":"text","value":", etc."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" is the id of the data that is being fetched.\nFor example, if you are fetching the data for the champion "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Aatrox"}]},{"type":"text","value":", the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" will be "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Aatrox"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The values are always a JS object based on one of the shieldbow classes (e.g. a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Summoner"}]},{"type":"text","value":" object)."}]},{"type":"element","tag":"alert","props":{"type":"danger"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There is an exception to the rule for values, which is the ratelimits.\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is discussed in the "},{"type":"element","tag":"a","props":{"href":"/guide/ratelimits"},"children":[{"type":"text","value":"Ratelimits"}]},{"type":"text","value":" section."}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"no-cache"},"children":[{"type":"text","value":"No cache"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Because shieldbow needs a cache to be able to keep track of the ratelimits, you cannot disable caching completely."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, you can disable caching for all the fetched data from RIOT APIs or data dragon."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will lead to the client not caching any data, but still keeping track of the ratelimits."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-92dcd9{color:#953800}\n.ct-9ffabc{color:#0A3069}\n.ct-c8928f{color:#CF222E}\n.ct-644dd0{color:#0550AE}\n.ct-70aee5{color:#6E7781}\n.ct-32732a{color:#8250DF}\n.ct-e5430a{color:#24292F}\n.dark .ct-e5430a{color:#C9D1D9}\n.dark .ct-32732a{color:#D2A8FF}\n.dark .ct-70aee5{color:#8B949E}\n.dark .ct-644dd0{color:#79C0FF}\n.dark .ct-c8928f{color:#FF7B72}\n.dark .ct-9ffabc{color:#A5D6FF}\n.dark .ct-92dcd9{color:#FFA657}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"what-it-is","depth":3,"text":"What it is"},{"id":"how-does-it-work","depth":3,"text":"How does it work"},{"id":"the-defaults","depth":3,"text":"The defaults"},{"id":"custom-cache","depth":3,"text":"Custom cache"},{"id":"no-cache","depth":3,"text":"No cache"}]}},"_type":"markdown","_id":"content:0.guide:4.caching.md","_source":"content","_file":"0.guide/4.caching.md","_extension":"md"}