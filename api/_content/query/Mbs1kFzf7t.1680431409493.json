{"_path":"/guide/ratelimiting","_dir":"guide","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Rate limiting","description":"As of now, the client can handle rate limiting automatically.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rate-limiting"},"children":[{"type":"text","value":"Rate limiting"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As of now, the client can handle rate limiting automatically."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is done by storing the rate limit information in memory using the cache."}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"If you are building a custom caching solution"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf the cache key begins with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"limits:"}]},{"type":"text","value":", it is a rate limit key.\nThe value is an array of numbers."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The shieldbow v2 client can actually handle rate limits very well, even without having a shared cache.\nAs it relies on the response headers, it can process the rate limit information and update its own cache accordingly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This way, you can use the client in a distributed environment, and it will still work.\nEven without a shared cache!"}]},{"type":"element","tag":"h3","props":{"id":"customization"},"children":[{"type":"text","value":"Customization"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By providing some "},{"type":"element","tag":"a","props":{"href":"/api/interfaces/ratelimiteroptions"},"children":[{"type":"text","value":"RateLimiterOptions"}]},{"type":"text","value":", you can customize the rate limiter."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Some useful options are:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"retry"}]},{"type":"text","value":" (object): The retrying options, the client will only retry if the original request timed out."},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"retries"}]},{"type":"text","value":" (number): The number of times to retry the request (default = 0)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"retryDelay"}]},{"type":"text","value":" (number): The delay between each retry in ms (default = 3000)."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" (boolean): Whether to throw an error when the rate limit is reached (default = true).\nIf set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":", the client will delay the request until the rate limit is reset and send the request."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"strategy"}]},{"type":"text","value":" (string): The strategy to use when the rate limit is reached."},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"burst"}]},{"type":"text","value":" (default): The client will send the request immediately."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spread"}]},{"type":"text","value":": The client will calculate appropriate amount of delay for the request to avoid being ratelimited."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"code","props":{"code":"const client = new ShieldbowClient();\nclient.initialize({\n  ratelimiter: {\n    retry: {\n      retries: 3,\n      retryDelay: 5000,\n    },\n    throw: false,\n    strategy: 'spread',\n  },\n});\n","language":"ts","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5a9f74"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-870ff3"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a9f74"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a9f74"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ffe536"},"children":[{"type":"text","value":"ShieldbowClient"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"client."}]},{"type":"element","tag":"span","props":{"class":"ct-ffe536"},"children":[{"type":"text","value":"initialize"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"  ratelimiter: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"    retry: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"      retries: "}]},{"type":"element","tag":"span","props":{"class":"ct-870ff3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"      retryDelay: "}]},{"type":"element","tag":"span","props":{"class":"ct-870ff3"},"children":[{"type":"text","value":"5000"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"    throw: "}]},{"type":"element","tag":"span","props":{"class":"ct-870ff3"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"    strategy: "}]},{"type":"element","tag":"span","props":{"class":"ct-a126f3"},"children":[{"type":"text","value":"'spread'"}]},{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-42cf24"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"custom-limits"},"children":[{"type":"text","value":"Custom Limits"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Shieldbow also provides a way to set custom rate limits."}]},{"type":"element","tag":"alert","props":{"type":"danger"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is not recommended but is only kept as a backup."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While I originally got a production API key, for some reason, I was not getting the rate limit headers."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is a bug on RIOT's end, and was fixed eventually.\nHowever, if you face the same issue, you can use the fixed rate limits."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Simply provide "},{"type":"element","tag":"a","props":{"href":"/api/interfaces/ratelimiteroptions#applimit"},"children":[{"type":"text","value":"appLimit"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"/api/interfaces/ratelimiteroptions#methodlimit"},"children":[{"type":"text","value":"methodLimit"}]},{"type":"text","value":"\noptions for the ratelimiter config during initialization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a saving grace, however, these will automatically be overwritten by the response headers."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a126f3{color:#0A3069}\n.ct-ffe536{color:#8250DF}\n.ct-870ff3{color:#0550AE}\n.ct-42cf24{color:#24292F}\n.ct-5a9f74{color:#CF222E}\n.dark .ct-5a9f74{color:#FF7B72}\n.dark .ct-42cf24{color:#C9D1D9}\n.dark .ct-870ff3{color:#79C0FF}\n.dark .ct-ffe536{color:#D2A8FF}\n.dark .ct-a126f3{color:#A5D6FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"customization","depth":3,"text":"Customization"},{"id":"example","depth":3,"text":"Example"},{"id":"custom-limits","depth":3,"text":"Custom Limits"}]}},"_type":"markdown","_id":"content:1.guide:6.ratelimiting.md","_source":"content","_file":"1.guide/6.ratelimiting.md","_extension":"md"}